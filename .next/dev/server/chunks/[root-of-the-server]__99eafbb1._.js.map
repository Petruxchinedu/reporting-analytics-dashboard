{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/models/Report.ts"],"sourcesContent":["// models/Report.ts\r\nimport mongoose, { Schema, Document, Model } from \"mongoose\";\r\n\r\nexport interface IReport extends Document {\r\n  userId: string;\r\n  name: string;\r\n  status: \"Pending\" | \"Generated\";\r\n  date: Date;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst ReportSchema: Schema<IReport> = new Schema(\r\n  {\r\n    userId: { type: String, required: true, index: true },\r\n    name: { type: String, required: true },\r\n    status: { type: String, enum: [\"Pending\", \"Generated\"], default: \"Pending\" },\r\n    date: { type: Date, required: true },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nconst Report: Model<IReport> =\r\n  mongoose.models.Report || mongoose.model<IReport>(\"Report\", ReportSchema);\r\n\r\nexport default Report;\r\n\r\n"],"names":[],"mappings":";;;;AAAA,mBAAmB;AACnB;;AAWA,MAAM,eAAgC,IAAI,uNAAM,CAC9C;IACE,QAAQ;QAAE,MAAM;QAAQ,UAAU;QAAM,OAAO;IAAK;IACpD,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,QAAQ;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAW;SAAY;QAAE,SAAS;IAAU;IAC3E,MAAM;QAAE,MAAM;QAAM,UAAU;IAAK;AACrC,GACA;IAAE,YAAY;AAAK;AAGrB,MAAM,SACJ,wNAAQ,CAAC,MAAM,CAAC,MAAM,IAAI,wNAAQ,CAAC,KAAK,CAAU,UAAU;uCAE/C"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/lib/db.ts"],"sourcesContent":["// lib/db.ts\r\nimport mongoose from \"mongoose\";\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) throw new Error(\"MONGODB_URI is not defined\");\r\n\r\nlet cached = (global as any).mongoose;\r\n\r\nif (!cached) {\r\n  cached = (global as any).mongoose = { conn: null, promise: null };\r\n}\r\n\r\nexport async function connectDB() {\r\n  if (cached.conn) return cached.conn;\r\n\r\n  if (!cached.promise) {\r\n    cached.promise = mongoose\r\n      .connect(MONGODB_URI)\r\n      .then((conn) => {\r\n        console.log(\"✅ MongoDB connected\"); // <-- logs on server start\r\n        return conn;\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"❌ MongoDB connection error:\", err);\r\n        throw err;\r\n      });\r\n  }\r\n\r\n  cached.conn = await cached.promise;\r\n  return cached.conn;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,YAAY;AACZ;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa,MAAM,IAAI,MAAM;AAElC,IAAI,SAAS,yDAAgB,QAAQ;AAErC,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAgB,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAClE;AAEO,eAAe;IACpB,IAAI,OAAO,IAAI,EAAE,OAAO,OAAO,IAAI;IAEnC,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO,OAAO,GAAG,wNAAQ,CACtB,OAAO,CAAC,aACR,IAAI,CAAC,CAAC;YACL,QAAQ,GAAG,CAAC,wBAAwB,2BAA2B;YAC/D,OAAO;QACT,GACC,KAAK,CAAC,CAAC;YACN,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM;QACR;IACJ;IAEA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IAClC,OAAO,OAAO,IAAI;AACpB"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/pages/api/analytics/index.ts"],"sourcesContent":["import type { NextApiRequest, NextApiResponse } from \"next\";\r\nimport { getSession } from \"next-auth/react\";\r\nimport Report from \"../../../models/Report\";\r\nimport { connectDB } from \"../../../lib/db\";\r\n\r\nexport default async function handler(\r\n  req: NextApiRequest,\r\n  res: NextApiResponse\r\n) {\r\n  const session = await getSession({ req });\r\n  if (!session) {\r\n    return res.status(401).json({ message: \"Unauthorized\" });\r\n  }\r\n\r\n  await connectDB();\r\n\r\n  const userId = session.user.id;\r\n\r\n  const totalReports = await Report.countDocuments({ user: userId });\r\n  const pendingReports = await Report.countDocuments({\r\n    user: userId,\r\n    status: \"Pending\",\r\n  });\r\n  const generatedReports = await Report.countDocuments({\r\n    user: userId,\r\n    status: \"Generated\",\r\n  });\r\n\r\n  return res.status(200).json({\r\n    stats: [\r\n      {\r\n        label: \"Total Reports\",\r\n        value: totalReports,\r\n        change: \"+\",\r\n        type: \"reports\",\r\n      },\r\n      {\r\n        label: \"Pending Reports\",\r\n        value: pendingReports,\r\n        change: \"-\",\r\n        type: \"pending\",\r\n      },\r\n      {\r\n        label: \"Generated Reports\",\r\n        value: generatedReports,\r\n        change: \"+\",\r\n        type: \"generated\",\r\n      },\r\n    ],\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;AAEe,eAAe,QAC5B,GAAmB,EACnB,GAAoB;IAEpB,MAAM,UAAU,MAAM,IAAA,gTAAU,EAAC;QAAE;IAAI;IACvC,IAAI,CAAC,SAAS;QACZ,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAe;IACxD;IAEA,MAAM,IAAA,+GAAS;IAEf,MAAM,SAAS,QAAQ,IAAI,CAAC,EAAE;IAE9B,MAAM,eAAe,MAAM,oHAAM,CAAC,cAAc,CAAC;QAAE,MAAM;IAAO;IAChE,MAAM,iBAAiB,MAAM,oHAAM,CAAC,cAAc,CAAC;QACjD,MAAM;QACN,QAAQ;IACV;IACA,MAAM,mBAAmB,MAAM,oHAAM,CAAC,cAAc,CAAC;QACnD,MAAM;QACN,QAAQ;IACV;IAEA,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAC1B,OAAO;YACL;gBACE,OAAO;gBACP,OAAO;gBACP,QAAQ;gBACR,MAAM;YACR;YACA;gBACE,OAAO;gBACP,OAAO;gBACP,QAAQ;gBACR,MAAM;YACR;YACA;gBACE,OAAO;gBACP,OAAO;gBACP,QAAQ;gBACR,MAAM;YACR;SACD;IACH;AACF"}}]
}