{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/models/Report.ts"],"sourcesContent":["// models/Report.ts\r\nimport mongoose, { Schema, Document, Model } from \"mongoose\";\r\n\r\nexport interface IReport extends Document {\r\n  userId: string;\r\n  name: string;\r\n  status: \"Pending\" | \"Generated\";\r\n  date: Date;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst ReportSchema: Schema<IReport> = new Schema(\r\n  {\r\n    userId: { type: String, required: true, index: true },\r\n    name: { type: String, required: true },\r\n    status: { type: String, enum: [\"Pending\", \"Generated\"], default: \"Pending\" },\r\n    date: { type: Date, required: true },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nconst Report: Model<IReport> =\r\n  mongoose.models.Report || mongoose.model<IReport>(\"Report\", ReportSchema);\r\n\r\nexport default Report;\r\n\r\n"],"names":[],"mappings":";;;;AAAA,mBAAmB;AACnB;;AAWA,MAAM,eAAgC,IAAI,uNAAM,CAC9C;IACE,QAAQ;QAAE,MAAM;QAAQ,UAAU;QAAM,OAAO;IAAK;IACpD,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,QAAQ;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAW;SAAY;QAAE,SAAS;IAAU;IAC3E,MAAM;QAAE,MAAM;QAAM,UAAU;IAAK;AACrC,GACA;IAAE,YAAY;AAAK;AAGrB,MAAM,SACJ,wNAAQ,CAAC,MAAM,CAAC,MAAM,IAAI,wNAAQ,CAAC,KAAK,CAAU,UAAU;uCAE/C"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/lib/db.ts"],"sourcesContent":["// lib/db.ts\r\nimport mongoose from \"mongoose\";\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) throw new Error(\"MONGODB_URI is not defined\");\r\n\r\nlet cached = (global as any).mongoose;\r\n\r\nif (!cached) {\r\n  cached = (global as any).mongoose = { conn: null, promise: null };\r\n}\r\n\r\nexport async function connectDB() {\r\n  if (cached.conn) return cached.conn;\r\n\r\n  if (!cached.promise) {\r\n    cached.promise = mongoose\r\n      .connect(MONGODB_URI)\r\n      .then((conn) => {\r\n        console.log(\"✅ MongoDB connected\"); // <-- logs on server start\r\n        return conn;\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"❌ MongoDB connection error:\", err);\r\n        throw err;\r\n      });\r\n  }\r\n\r\n  cached.conn = await cached.promise;\r\n  return cached.conn;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,YAAY;AACZ;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa,MAAM,IAAI,MAAM;AAElC,IAAI,SAAS,yDAAgB,QAAQ;AAErC,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAgB,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAClE;AAEO,eAAe;IACpB,IAAI,OAAO,IAAI,EAAE,OAAO,OAAO,IAAI;IAEnC,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO,OAAO,GAAG,wNAAQ,CACtB,OAAO,CAAC,aACR,IAAI,CAAC,CAAC;YACL,QAAQ,GAAG,CAAC,wBAAwB,2BAA2B;YAC/D,OAAO;QACT,GACC,KAAK,CAAC,CAAC;YACN,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM;QACR;IACJ;IAEA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IAClC,OAAO,OAAO,IAAI;AACpB"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/pages/api/reports/index.ts"],"sourcesContent":["import type { NextApiRequest, NextApiResponse } from \"next\";\r\nimport { getSession } from \"next-auth/react\";\r\nimport Report from \"../../../models/Report\";\r\nimport { connectDB } from \"../../../lib/db\";\r\n\r\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\r\n  const session = await getSession({ req });\r\n  if (!session) return res.status(401).json({ message: \"Unauthorized\" });\r\n\r\n  await connectDB();\r\n\r\n  if (req.method === \"GET\") {\r\n    // Fetch reports for logged-in user\r\n    const reports = await Report.find({ user: session.user.id }).sort({ date: -1 });\r\n    return res.status(200).json(reports);\r\n  }\r\n\r\n  if (req.method === \"POST\") {\r\n    const { name, status } = req.body;\r\n    if (!name) return res.status(400).json({ message: \"Report name required\" });\r\n\r\n    const report = await Report.create({\r\n      name,\r\n      status: status || \"Pending\",\r\n      user: session.user.id,\r\n    });\r\n\r\n    return res.status(201).json(report);\r\n  }\r\n\r\n  res.status(405).json({ message: \"Method not allowed\" });\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;AAEe,eAAe,QAAQ,GAAmB,EAAE,GAAoB;IAC7E,MAAM,UAAU,MAAM,IAAA,gTAAU,EAAC;QAAE;IAAI;IACvC,IAAI,CAAC,SAAS,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,SAAS;IAAe;IAEpE,MAAM,IAAA,+GAAS;IAEf,IAAI,IAAI,MAAM,KAAK,OAAO;QACxB,mCAAmC;QACnC,MAAM,UAAU,MAAM,oHAAM,CAAC,IAAI,CAAC;YAAE,MAAM,QAAQ,IAAI,CAAC,EAAE;QAAC,GAAG,IAAI,CAAC;YAAE,MAAM,CAAC;QAAE;QAC7E,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;IAC9B;IAEA,IAAI,IAAI,MAAM,KAAK,QAAQ;QACzB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAI,IAAI;QACjC,IAAI,CAAC,MAAM,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAuB;QAEzE,MAAM,SAAS,MAAM,oHAAM,CAAC,MAAM,CAAC;YACjC;YACA,QAAQ,UAAU;YAClB,MAAM,QAAQ,IAAI,CAAC,EAAE;QACvB;QAEA,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;IAC9B;IAEA,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,SAAS;IAAqB;AACvD"}}]
}