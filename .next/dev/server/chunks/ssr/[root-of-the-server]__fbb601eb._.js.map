{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/components/layout/Sidebar.tsx"],"sourcesContent":["import { Box, Stack, Text, Icon,Flex, Link as ChakraLink } from \"@chakra-ui/react\";\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { \r\n  LuLayoutDashboard, \r\n  LuChartBar, \r\n  LuFileText, \r\n  LuSettings \r\n} from \"react-icons/lu\"; // Lucide icons look great with v3\r\n\r\nconst navItems = [\r\n  { label: \"Dashboard\", href: \"/\", icon: LuLayoutDashboard },\r\n  { label: \"Analytics\", href: \"/analytics\", icon: LuChartBar },\r\n  { label: \"Reports\", href: \"/reports\", icon: LuFileText },\r\n  { label: \"Settings\", href: \"/settings\", icon: LuSettings },\r\n];\r\n\r\nexport default function Sidebar() {\r\n  const pathname = usePathname();\r\n\r\n  return (\r\n    <Box\r\n      h=\"full\"\r\n      w=\"full\"\r\n      p={4}\r\n    >\r\n      {/* Brand / Logo Area */}\r\n      <Flex align=\"center\" gap={3} px={3} mb={10}>\r\n        <Box bg=\"teal.600\" p={1.5} borderRadius=\"lg\">\r\n          <Icon color=\"white\" fontSize=\"xl\" as={LuLayoutDashboard} />\r\n        </Box>\r\n        <Text fontSize=\"xl\" fontWeight=\"bold\" letterSpacing=\"tight\">\r\n          SaaS Admin\r\n        </Text>\r\n      </Flex>\r\n\r\n      {/* Navigation Links */}\r\n      <Stack gap={1}>\r\n        {navItems.map((item) => {\r\n          const isActive = pathname === item.href;\r\n          \r\n          return (\r\n            <ChakraLink\r\n              key={item.href}\r\n              asChild\r\n              textDecoration=\"none\"\r\n              _hover={{ textDecoration: \"none\" }}\r\n            >\r\n              <Link href={item.href}>\r\n                <Box\r\n                  display=\"flex\"\r\n                  alignItems=\"center\"\r\n                  gap={3}\r\n                  px={3}\r\n                  py={2.5}\r\n                  borderRadius=\"lg\"\r\n                  transition=\"all 0.2s\"\r\n                  fontWeight=\"medium\"\r\n                  fontSize=\"sm\"\r\n                  bg={isActive ? \"teal.50\" : \"transparent\"}\r\n                  color={isActive ? \"teal.700\" : \"gray.600\"}\r\n                  _dark={{\r\n                    bg: isActive ? \"teal.900/30\" : \"transparent\",\r\n                    color: isActive ? \"teal.200\" : \"gray.400\",\r\n                  }}\r\n                  _hover={{\r\n                    bg: isActive ? \"teal.50\" : \"gray.100\",\r\n                    color: isActive ? \"teal.700\" : \"gray.900\",\r\n                    _dark: {\r\n                      bg: isActive ? \"teal.900/30\" : \"gray.800\",\r\n                      color: isActive ? \"teal.200\" : \"gray.100\",\r\n                    }\r\n                  }}\r\n                >\r\n                  <Icon as={item.icon} fontSize=\"lg\" />\r\n                  {item.label}\r\n                </Box>\r\n              </Link>\r\n            </ChakraLink>\r\n          );\r\n        })}\r\n      </Stack>\r\n    </Box>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA,gXAKyB,kCAAkC;;;;;;;;;;AAE3D,MAAM,WAAW;IACf;QAAE,OAAO;QAAa,MAAM;QAAK,MAAM,6OAAiB;IAAC;IACzD;QAAE,OAAO;QAAa,MAAM;QAAc,MAAM,sOAAU;IAAC;IAC3D;QAAE,OAAO;QAAW,MAAM;QAAY,MAAM,sOAAU;IAAC;IACvD;QAAE,OAAO;QAAY,MAAM;QAAa,MAAM,sOAAU;IAAC;CAC1D;AAEc,SAAS;IACtB,MAAM,WAAW,IAAA,yQAAW;IAE5B,qBACE,qKAAC,gUAAG;QACF,GAAE;QACF,GAAE;QACF,GAAG;;0BAGH,qKAAC,iUAAI;gBAAC,OAAM;gBAAS,KAAK;gBAAG,IAAI;gBAAG,IAAI;;kCACtC,qKAAC,gUAAG;wBAAC,IAAG;wBAAW,GAAG;wBAAK,cAAa;kCACtC,cAAA,qKAAC,iUAAI;4BAAC,OAAM;4BAAQ,UAAS;4BAAK,IAAI,6OAAiB;;;;;;;;;;;kCAEzD,qKAAC,iUAAI;wBAAC,UAAS;wBAAK,YAAW;wBAAO,eAAc;kCAAQ;;;;;;;;;;;;0BAM9D,qKAAC,kUAAK;gBAAC,KAAK;0BACT,SAAS,GAAG,CAAC,CAAC;oBACb,MAAM,WAAW,aAAa,KAAK,IAAI;oBAEvC,qBACE,qKAAC,iUAAU;wBAET,OAAO;wBACP,gBAAe;wBACf,QAAQ;4BAAE,gBAAgB;wBAAO;kCAEjC,cAAA,qKAAC,+PAAI;4BAAC,MAAM,KAAK,IAAI;sCACnB,cAAA,qKAAC,gUAAG;gCACF,SAAQ;gCACR,YAAW;gCACX,KAAK;gCACL,IAAI;gCACJ,IAAI;gCACJ,cAAa;gCACb,YAAW;gCACX,YAAW;gCACX,UAAS;gCACT,IAAI,WAAW,YAAY;gCAC3B,OAAO,WAAW,aAAa;gCAC/B,OAAO;oCACL,IAAI,WAAW,gBAAgB;oCAC/B,OAAO,WAAW,aAAa;gCACjC;gCACA,QAAQ;oCACN,IAAI,WAAW,YAAY;oCAC3B,OAAO,WAAW,aAAa;oCAC/B,OAAO;wCACL,IAAI,WAAW,gBAAgB;wCAC/B,OAAO,WAAW,aAAa;oCACjC;gCACF;;kDAEA,qKAAC,iUAAI;wCAAC,IAAI,KAAK,IAAI;wCAAE,UAAS;;;;;;oCAC7B,KAAK,KAAK;;;;;;;;;;;;uBAhCV,KAAK,IAAI;;;;;gBAqCpB;;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/components/layout/Topbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { \r\n  Box, Flex, Heading, Input, IconButton, HStack, Text, Menu,\r\n} from \"@chakra-ui/react\";\r\nimport { \r\n  LuSearch, LuBell, LuMoon, LuSun, LuCircleUser, LuDot \r\n} from \"react-icons/lu\";\r\nimport { useColorMode } from \"../ui/color-mode\"; \r\nimport { useSession } from \"next-auth/react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter, usePathname, useSearchParams } from \"next/navigation\";\r\n\r\nexport default function Topbar() {\r\n  const { colorMode, toggleColorMode } = useColorMode();\r\n  const { data: session } = useSession();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const searchParams = useSearchParams();\r\n  \r\n  // Initialize search state from URL so it doesn't clear on refresh\r\n  const [searchQuery, setSearchQuery] = useState(searchParams.get(\"query\") || \"\");\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => { setMounted(true); }, []);\r\n\r\n  const handleSearch = (term: string) => {\r\n    setSearchQuery(term);\r\n    const params = new URLSearchParams(searchParams);\r\n    if (term) {\r\n      params.set(\"query\", term);\r\n    } else {\r\n      params.delete(\"query\");\r\n    }\r\n    // Updates the URL without a full page reload\r\n    router.replace(`${pathname}?${params.toString()}`);\r\n  };\r\n\r\n  if (!mounted) return <Flex h=\"70px\" />; \r\n\r\n  return (\r\n    <Flex\r\n      h=\"70px\" align=\"center\" justify=\"space-between\" px={6}\r\n      bg=\"white\" _dark={{ bg: \"gray.900\" }}\r\n      borderBottom=\"1px solid\" borderColor=\"gray.200\" _darkBorderColor=\"gray.800\"\r\n      position=\"sticky\" top=\"0\" zIndex=\"100\"\r\n    >\r\n      <HStack gap={4}>\r\n        <Heading size=\"md\" fontWeight=\"semibold\">Overview</Heading>\r\n      </HStack>\r\n\r\n      {/* Functional Search Bar */}\r\n      <Box display={{ base: \"none\", md: \"block\" }} maxW=\"400px\" w=\"full\" mx={8}>\r\n        <Box position=\"relative\">\r\n          <Box position=\"absolute\" left=\"3\" top=\"50%\" transform=\"translateY(-50%)\" zIndex=\"1\" color=\"gray.400\">\r\n            <LuSearch size={18} />\r\n          </Box>\r\n          <Input\r\n            placeholder=\"Search reports...\"\r\n            value={searchQuery}\r\n            onChange={(e) => handleSearch(e.target.value)}\r\n            pl=\"10\" borderRadius=\"full\" bg=\"gray.100\" _dark={{ bg: \"gray.800\" }}\r\n            border=\"none\" _focus={{ ring: \"2px\", ringColor: \"teal.500\", bg: \"white\" }}\r\n          />\r\n        </Box>\r\n      </Box>\r\n\r\n      <HStack gap={3}>\r\n        <Menu.Root portalled>\r\n          <Menu.Trigger asChild>\r\n            <IconButton variant=\"ghost\" aria-label=\"Notifications\"><LuBell size={20} /></IconButton>\r\n          </Menu.Trigger>\r\n          <Menu.Content minW=\"200px\" bg=\"white\" _dark={{ bg: \"gray.800\" }} boxShadow=\"md\">\r\n             <Menu.Item value=\"1\" p={3}><Text fontSize=\"sm\">No new notifications</Text></Menu.Item>\r\n          </Menu.Content>\r\n        </Menu.Root>\r\n\r\n        <IconButton variant=\"ghost\" aria-label=\"Toggle Theme\" onClick={toggleColorMode}>\r\n          {colorMode === \"light\" ? <LuMoon size={20} /> : <LuSun size={20} />}\r\n        </IconButton>\r\n\r\n        <HStack gap={3} pl={2}>\r\n          <Box textAlign=\"right\" display={{ base: \"none\", sm: \"block\" }}>\r\n            <Text fontSize=\"sm\" fontWeight=\"bold\">{session?.user?.name || \"User\"}</Text>\r\n            <Text fontSize=\"xs\" color=\"gray.500\">Admin</Text>\r\n          </Box>\r\n          <Box w=\"40px\" h=\"40px\" bg=\"teal.500\" borderRadius=\"full\" display=\"flex\" alignItems=\"center\" justifyContent=\"center\">\r\n            <LuCircleUser size={24} color=\"white\" />\r\n          </Box>\r\n        </HStack>\r\n      </HStack>\r\n    </Flex>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 507, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/components/layout/LogouButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button, Icon, Text } from \"@chakra-ui/react\";\r\nimport { signOut } from \"next-auth/react\";\r\nimport { LuLogOut } from \"react-icons/lu\";\r\n\r\nexport function LogoutButton() {\r\n  return (\r\n    <Button\r\n      variant=\"ghost\"\r\n      colorPalette=\"red\"\r\n      width=\"full\"\r\n      justifyContent=\"flex-start\"\r\n      gap={3}\r\n      borderRadius=\"xl\"\r\n      size=\"lg\"\r\n      _hover={{ bg: \"red.50\", _dark: { bg: \"red.900/20\" } }}\r\n      onClick={() => signOut({ callbackUrl: \"/login\" })}\r\n    >\r\n      <LuLogOut />\r\n      <Text fontWeight=\"bold\">Sign Out</Text>\r\n    </Button>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;AAJA;;;;;AAMO,SAAS;IACd,qBACE,qKAAC,mUAAM;QACL,SAAQ;QACR,cAAa;QACb,OAAM;QACN,gBAAe;QACf,KAAK;QACL,cAAa;QACb,MAAK;QACL,QAAQ;YAAE,IAAI;YAAU,OAAO;gBAAE,IAAI;YAAa;QAAE;QACpD,SAAS,IAAM,IAAA,6SAAO,EAAC;gBAAE,aAAa;YAAS;;0BAE/C,qKAAC,oOAAQ;;;;;0BACT,qKAAC,iUAAI;gBAAC,YAAW;0BAAO;;;;;;;;;;;;AAG9B"}},
    {"offset": {"line": 570, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/components/layout/DashboardLayout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Box, Flex, Separator, Stack } from \"@chakra-ui/react\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport Topbar from \"./Topbar\";\r\nimport { LogoutButton } from \"./LogouButton\"; // We will create this below\r\n\r\ninterface DashboardLayoutProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport default function DashboardLayout({ children }: DashboardLayoutProps) {\r\n  return (\r\n    <Flex \r\n      minH=\"100vh\" \r\n      bg=\"gray.50\" \r\n      _dark={{ bg: \"gray.950\" }}\r\n    >\r\n      {/* Sidebar Area */}\r\n      <Box \r\n        display={{ base: \"none\", md: \"flex\" }} \r\n        flexDirection=\"column\"\r\n        w=\"280px\" \r\n        position=\"fixed\"\r\n        h=\"100vh\"\r\n        borderEndWidth=\"1px\"\r\n        bg=\"white\"\r\n        _dark={{ bg: \"gray.900\", borderEndColor: \"gray.800\" }}\r\n      >\r\n        <Flex direction=\"column\" h=\"full\" p={4}>\r\n          <Box flex=\"1\">\r\n            <Sidebar />\r\n          </Box>\r\n          \r\n          <Separator my={4} />\r\n          \r\n          {/* Logout button stays at the bottom of the sidebar */}\r\n          <LogoutButton />\r\n        </Flex>\r\n      </Box>\r\n\r\n      {/* Main Container - added ml to account for fixed sidebar */}\r\n      <Flex direction=\"column\" flex=\"1\" minW={0} ml={{ base: 0, md: \"280px\" }}>\r\n        <Box \r\n          position=\"sticky\" \r\n          top=\"0\" \r\n          zIndex=\"docked\" \r\n          bg=\"white/80\" \r\n          backdropFilter=\"blur(10px)\"\r\n          _dark={{ bg: \"gray.900/80\" }}\r\n        >\r\n          <Topbar />\r\n          <Separator />\r\n        </Box>\r\n\r\n        <Box\r\n          as=\"main\"\r\n          p={{ base: 4, md: 8 }}\r\n          flex=\"1\"\r\n          mx=\"auto\"\r\n          w=\"full\"\r\n          maxW=\"8xl\"\r\n        >\r\n          {children}\r\n        </Box>\r\n      </Flex>\r\n    </Flex>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA,+NAA8C,4BAA4B;;;;;;;;AAL1E;;;;;;AAWe,SAAS,gBAAgB,EAAE,QAAQ,EAAwB;IACxE,qBACE,qKAAC,iUAAI;QACH,MAAK;QACL,IAAG;QACH,OAAO;YAAE,IAAI;QAAW;;0BAGxB,qKAAC,gUAAG;gBACF,SAAS;oBAAE,MAAM;oBAAQ,IAAI;gBAAO;gBACpC,eAAc;gBACd,GAAE;gBACF,UAAS;gBACT,GAAE;gBACF,gBAAe;gBACf,IAAG;gBACH,OAAO;oBAAE,IAAI;oBAAY,gBAAgB;gBAAW;0BAEpD,cAAA,qKAAC,iUAAI;oBAAC,WAAU;oBAAS,GAAE;oBAAO,GAAG;;sCACnC,qKAAC,gUAAG;4BAAC,MAAK;sCACR,cAAA,qKAAC,oIAAO;;;;;;;;;;sCAGV,qKAAC,sUAAS;4BAAC,IAAI;;;;;;sCAGf,qKAAC,6IAAY;;;;;;;;;;;;;;;;0BAKjB,qKAAC,iUAAI;gBAAC,WAAU;gBAAS,MAAK;gBAAI,MAAM;gBAAG,IAAI;oBAAE,MAAM;oBAAG,IAAI;gBAAQ;;kCACpE,qKAAC,gUAAG;wBACF,UAAS;wBACT,KAAI;wBACJ,QAAO;wBACP,IAAG;wBACH,gBAAe;wBACf,OAAO;4BAAE,IAAI;wBAAc;;0CAE3B,qKAAC,mIAAM;;;;;0CACP,qKAAC,sUAAS;;;;;;;;;;;kCAGZ,qKAAC,gUAAG;wBACF,IAAG;wBACH,GAAG;4BAAE,MAAM;4BAAG,IAAI;wBAAE;wBACpB,MAAK;wBACL,IAAG;wBACH,GAAE;wBACF,MAAK;kCAEJ;;;;;;;;;;;;;;;;;;AAKX"}},
    {"offset": {"line": 724, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/lib/api/userSettings.ts"],"sourcesContent":["export async function fetchUserSettings() {\r\n  const res = await fetch(\"/api/user/settings\");\r\n\r\n  if (!res.ok) {\r\n    throw new Error(\"Failed to load user settings\");\r\n  }\r\n\r\n  return res.json();\r\n}\r\n\r\nexport async function updateUserSettings(payload: any) {\r\n  const res = await fetch(\"/api/user/settings\", {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\n  if (!res.ok) {\r\n    throw new Error(\"Failed to update user settings\");\r\n  }\r\n\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAO,eAAe;IACpB,MAAM,MAAM,MAAM,MAAM;IAExB,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,mBAAmB,OAAY;IACnD,MAAM,MAAM,MAAM,MAAM,sBAAsB;QAC5C,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 756, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/Documents/dashboard-monorepo/frontend/pages/settings.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport {\r\n  Box,\r\n  Heading,\r\n  Text,\r\n  Stack,\r\n  HStack,\r\n  Switch,\r\n  Button,\r\n  Spinner,\r\n  Center,\r\n  Field,\r\n  Separator,\r\n} from \"@chakra-ui/react\";\r\nimport DashboardLayout from \"../components/layout/DashboardLayout\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { fetchUserSettings, updateUserSettings } from \"../lib/api/userSettings\";\r\nimport { toaster } from \"../components/ui/toaster\";\r\nimport { useColorMode } from \"../components/ui/color-mode\";\r\n\r\nexport default function SettingsPage() {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n  const { colorMode, setColorMode } = useColorMode();\r\n\r\n  // Local state for the switch to make it feel instant (Optimistic UI)\r\n  const [notifsEnabled, setNotifsEnabled] = useState(false);\r\n\r\n  // 1. Load settings from Database\r\n  const { data, isLoading, error } = useQuery({\r\n    queryKey: [\"user-settings\"],\r\n    queryFn: fetchUserSettings,\r\n  });\r\n\r\n  // 2. Sync Local UI when data arrives from database\r\n  useEffect(() => {\r\n    if (data) {\r\n      setNotifsEnabled(data.notificationsEnabled);\r\n      if (data.theme) setColorMode(data.theme);\r\n    }\r\n  }, [data, setColorMode]);\r\n\r\n  // 3. Update settings Mutation\r\n  const mutation = useMutation({\r\n    mutationFn: updateUserSettings,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"user-settings\"] });\r\n      toaster.create({\r\n        title: \"Settings Saved\",\r\n        description: \"Preferences synced successfully.\",\r\n        type: \"success\",\r\n      });\r\n    },\r\n    onError: () => {\r\n      // Revert local state if DB update fails\r\n      setNotifsEnabled(!notifsEnabled);\r\n      toaster.create({\r\n        title: \"Sync Error\",\r\n        description: \"Failed to update database.\",\r\n        type: \"error\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleToggleNotifs = (details: { checked: boolean }) => {\r\n    setNotifsEnabled(details.checked); // 1. Instant UI update\r\n    mutation.mutate({ notificationsEnabled: details.checked }); // 2. Background DB update\r\n  };\r\n\r\n  const handleThemeChange = (newTheme: string) => {\r\n    setColorMode(newTheme); // 1. Instant CSS change\r\n    mutation.mutate({ theme: newTheme }); // 2. Background DB update\r\n  };\r\n\r\n  // Route Protection\r\n  useEffect(() => {\r\n    if (status === \"unauthenticated\") {\r\n      router.push(\"/login\");\r\n    }\r\n  }, [status, router]);\r\n\r\n  if (status === \"loading\" || isLoading) {\r\n    return (\r\n      <Center h=\"100vh\">\r\n        <Stack align=\"center\" gap={4}>\r\n          <Spinner size=\"xl\" color=\"teal.500\" />\r\n          <Text fontWeight=\"medium\" color=\"gray.500\">Loading your profile...</Text>\r\n        </Stack>\r\n      </Center>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <DashboardLayout>\r\n        <Center h=\"60vh\">\r\n          <Text color=\"red.500\">Error connecting to settings service.</Text>\r\n        </Center>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <Box maxW=\"2xl\">\r\n        <Heading size=\"2xl\" mb={2} fontWeight=\"black\">Settings</Heading>\r\n        <Text mb={8} color=\"gray.500\">Manage account preferences and interface settings.</Text>\r\n\r\n        <Stack gap={10}>\r\n          {/* Appearance Section */}\r\n          <Box>\r\n            <Heading size=\"md\" mb={4}>Appearance</Heading>\r\n            <Box p={6} bg=\"white\" _dark={{ bg: \"gray.900\" }} borderRadius=\"2xl\" border=\"1px solid\" borderColor=\"gray.100\" _darkBorderColor=\"gray.800\">\r\n              <Field.Root>\r\n                <Field.Label mb={3}>Interface Theme</Field.Label>\r\n                <HStack gap={3}>\r\n                  {[\"light\", \"dark\", \"system\"].map((t) => (\r\n                    <Button\r\n                      key={t}\r\n                      size=\"sm\"\r\n                      px={6}\r\n                      borderRadius=\"lg\"\r\n                      variant={colorMode === t ? \"solid\" : \"outline\"}\r\n                      colorPalette={colorMode === t ? \"teal\" : \"gray\"}\r\n                      onClick={() => handleThemeChange(t)}\r\n                    >\r\n                      {t.charAt(0).toUpperCase() + t.slice(1)}\r\n                    </Button>\r\n                  ))}\r\n                </HStack>\r\n              </Field.Root>\r\n            </Box>\r\n          </Box>\r\n\r\n          <Separator />\r\n\r\n          {/* Notifications Section */}\r\n          <Box>\r\n            <Heading size=\"md\" mb={4}>Notifications</Heading>\r\n            <Box p={6} bg=\"white\" _dark={{ bg: \"gray.900\" }} borderRadius=\"2xl\" border=\"1px solid\" borderColor=\"gray.100\" _darkBorderColor=\"gray.800\">\r\n              <Field.Root>\r\n                <HStack justify=\"space-between\" align=\"center\" width=\"full\">\r\n                  <Box>\r\n                    <Field.Label mb={0} fontSize=\"md\">Email Notifications</Field.Label>\r\n                    <Text fontSize=\"sm\" color=\"gray.500\">Get updates on your weekly analytics summary.</Text>\r\n                  </Box>\r\n                  \r\n                  <Switch.Root \r\n                    colorPalette=\"teal\"\r\n                    size=\"lg\"\r\n                    checked={notifsEnabled} // Uses local state for instant response\r\n                    onCheckedChange={handleToggleNotifs}\r\n                  >\r\n                    <Switch.Control>\r\n                      <Switch.Thumb />\r\n                    </Switch.Control>\r\n                  </Switch.Root>\r\n                </HStack>\r\n              </Field.Root>\r\n            </Box>\r\n          </Box>\r\n\r\n          {/* Security Section */}\r\n          <Box>\r\n            <Heading size=\"md\" mb={4}>Security</Heading>\r\n            <Box p={6} bg=\"white\" _dark={{ bg: \"gray.900\" }} borderRadius=\"2xl\" border=\"1px solid\" borderColor=\"gray.100\" _darkBorderColor=\"gray.800\">\r\n              <Text fontSize=\"sm\" color=\"gray.500\">Signed in as:</Text>\r\n              <Text fontWeight=\"bold\" fontSize=\"md\">{session?.user?.email}</Text>\r\n            </Box>\r\n          </Box>\r\n        </Stack>\r\n      </Box>\r\n    </DashboardLayout>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}